<app-gaming-neon-background></app-gaming-neon-background>
<div class="lobby-container">
  <header class="lobby-header">
    <h1>Sala: {{codigoSala}}</h1>
    <button class="back-btn" (click)="salirSala()">Salir</button>
  </header>

  <main class="lobby-main">
    <div class="players-section">
      <h2>Jugadores ({{jugadores.length}}/{{maxJugadores}})</h2>
      
      <div class="players-grid">
        <div 
          class="player-card" 
          *ngFor="let jugador of jugadores"
          [class.host]="jugador.esHost"
          [class.ready]="jugador.configurado">
          
          <div class="player-info">
            <h3>{{jugador.nombre}}</h3>
            <span class="player-role" *ngIf="jugador.esHost">üëë Host</span>
          </div>

          <div class="player-config" *ngIf="jugador.configurado">
            <div class="config-item">
              <span class="label">Tema:</span>
              <span class="value">{{jugador.tematica}}</span>
            </div>
            <div class="config-item">
              <span class="label">Dificultad:</span>
              <span class="value difficulty-{{jugador.dificultad}}" *ngIf="jugador.dificultad">
                {{getDificultadIcon(jugador.dificultad)}} {{jugador.dificultad | titlecase}}
              </span>
            </div>
          </div>

          <div class="player-status" *ngIf="!jugador.configurado">
            <span class="waiting">‚è≥ Configurando...</span>
          </div>
        </div>

        <!-- Slots vac√≠os -->
        <div 
          class="player-card empty" 
          *ngFor="let slot of getSlotsVacios()">
          <div class="empty-slot">
            <span>Esperando jugador...</span>
          </div>
        </div>
      </div>
    </div>

    <div class="game-info">
      <h3>Informaci√≥n del Juego</h3>
      
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Preguntas totales:</span>
          <span class="value">5</span>
        </div>
        
        <div class="info-item">
          <span class="label">Distribuci√≥n:</span>
          <span class="value">{{getDistribucionPreguntas()}}</span>
        </div>
        
        <div class="info-item">
          <span class="label">Tem√°ticas:</span>
          <div class="tematicas-list">
            <span 
              class="tematica-tag" 
              *ngFor="let tema of getTematicasConfiguradas()">
              {{tema}}
            </span>
          </div>
        </div>
      </div>

      <div class="invite-section" *ngIf="esHost">
        <h4>Invitar Jugadores</h4>
        <div class="invite-options">
          <div class="code-share">
            <label>C√≥digo de sala:</label>
            <div class="code-display">
              <span class="code">{{codigoSala}}</span>
              <button class="copy-btn" (click)="copiarCodigo()">üìã</button>
            </div>
          </div>
          
          <div class="email-invite">
            <input 
              type="email" 
              placeholder="Email del jugador"
              [(ngModel)]="emailInvitacion"
              class="email-input">
            <button class="invite-btn" (click)="enviarInvitacion()">Invitar</button>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="lobby-footer">
    <div class="game-status">
      <span *ngIf="!todosListos()">Esperando que todos configuren sus preguntas...</span>
      <span *ngIf="todosListos() && !esHost">Esperando que el host inicie la partida...</span>
    </div>
    
    <button 
      class="start-btn" 
      *ngIf="esHost && todosListos()"
      (click)="iniciarPartida()">
      Iniciar Partida
    </button>
  </footer>
</div>